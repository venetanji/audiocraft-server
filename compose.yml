x-gpu: &x-gpu
  deploy:
    resources:
      reservations:
        devices:
          - capabilities: [gpu]

services:
  dev:
    <<: *x-gpu
    image: ghcr.io/venetanji/audiocraft-server:main
    command: sleep infinity
    volumes:
      - ./server/:/app/server
    ports:
      - 7860:7860